[
  {
    "name": "codex_usage_warning_25_positive",
    "text": "Warning: You have less than 25% of your 24h limit remaining.",
    "expected_rule_ids": ["codex.usage.warning_25"],
    "expected_extracted": {"remaining": "25", "limit_hours": "24"}
  },
  {
    "name": "codex_usage_warning_25_negative",
    "text": "Warning: You have less than 25% of your limit remaining.",
    "expected_rule_ids": [],
    "negative_for": "codex.usage.warning_25"
  },
  {
    "name": "codex_usage_warning_10_positive",
    "text": "Warning: You have less than 10% of your 8h limit remaining.",
    "expected_rule_ids": ["codex.usage.warning_10"],
    "expected_extracted": {"remaining": "10", "limit_hours": "8"}
  },
  {
    "name": "codex_usage_warning_10_negative",
    "text": "Warning: You have less than 10% of your limit remaining.",
    "expected_rule_ids": [],
    "negative_for": "codex.usage.warning_10"
  },
  {
    "name": "codex_usage_warning_5_positive",
    "text": "Warning: You have less than 5% of your 12h limit remaining.",
    "expected_rule_ids": ["codex.usage.warning_5"],
    "expected_extracted": {"remaining": "5", "limit_hours": "12"}
  },
  {
    "name": "codex_usage_warning_5_negative",
    "text": "Warning: You have less than 5% of your limit remaining.",
    "expected_rule_ids": [],
    "negative_for": "codex.usage.warning_5"
  },
  {
    "name": "codex_usage_reached_positive",
    "text": "You've hit your usage limit for the 3h window. Please try again at 2:30 PM.",
    "expected_rule_ids": ["codex.usage.reached"],
    "expected_extracted": {"reset_time": "2:30 PM"}
  },
  {
    "name": "codex_usage_reached_negative",
    "text": "You've hit your usage limit. Please try again later.",
    "expected_rule_ids": [],
    "negative_for": "codex.usage.reached"
  },
  {
    "name": "codex_token_usage_positive",
    "text": "Token usage: total=125,432 input=50,000 (+ 20,000 cached) output=55,432",
    "expected_rule_ids": ["codex.session.token_usage"],
    "expected_extracted": {"total": "125,432", "input": "50,000", "cached": "20,000", "output": "55,432"}
  },
  {
    "name": "codex_token_usage_negative",
    "text": "Token usage: total=abc input=def output=ghi",
    "expected_rule_ids": [],
    "negative_for": "codex.session.token_usage"
  },
  {
    "name": "codex_resume_hint_positive",
    "text": "To resume this session, run: codex resume a1b2c3d4-e5f6-7890-abcd-ef1234567890",
    "expected_rule_ids": ["codex.session.resume_hint"],
    "expected_extracted": {"session_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"}
  },
  {
    "name": "codex_resume_hint_negative",
    "text": "To resume this session, run: codex resume not-a-uuid",
    "expected_rule_ids": [],
    "negative_for": "codex.session.resume_hint"
  },
  {
    "name": "codex_device_code_positive",
    "text": "Enter this one-time code at https://auth.openai.com: ABCD-12345",
    "expected_rule_ids": ["codex.auth.device_code_prompt"],
    "expected_extracted": {"code": "ABCD-12345"}
  },
  {
    "name": "codex_device_code_negative",
    "text": "Enter this one-time code: abcd-12345",
    "expected_rule_ids": [],
    "negative_for": "codex.auth.device_code_prompt"
  },
  {
    "name": "claude_compaction_positive",
    "text": "Conversation compacted 150,000 tokens to 25,000 tokens",
    "expected_rule_ids": ["claude_code.compaction"],
    "expected_extracted": {"tokens_before": "150,000", "tokens_after": "25,000"}
  },
  {
    "name": "claude_compaction_negative",
    "text": "Conversation compacted tokens to tokens",
    "expected_rule_ids": [],
    "negative_for": "claude_code.compaction"
  },
  {
    "name": "claude_compaction_complete_positive",
    "text": "Compaction complete, saved 50,000 tokens",
    "expected_rule_ids": ["claude_code.compaction.complete"],
    "expected_extracted": {"tokens_saved": "50,000"}
  },
  {
    "name": "claude_compaction_complete_negative",
    "text": "The conversation has not been compacted",
    "expected_rule_ids": [],
    "negative_for": "claude_code.compaction.complete"
  },
  {
    "name": "claude_banner_positive",
    "text": "Claude Code v1.2.3 starting session",
    "expected_rule_ids": ["claude_code.banner"],
    "expected_extracted": {"version": "1.2.3"}
  },
  {
    "name": "claude_banner_negative",
    "text": "Claude Code vX.Y starting session",
    "expected_rule_ids": [],
    "negative_for": "claude_code.banner"
  },
  {
    "name": "claude_usage_warning_positive",
    "text": "usage limit warning: 12% remaining",
    "expected_rule_ids": ["claude_code.usage.warning"],
    "expected_extracted": {"remaining": "12"}
  },
  {
    "name": "claude_usage_warning_negative",
    "text": "usage limit warning: almost none left",
    "expected_rule_ids": [],
    "negative_for": "claude_code.usage.warning"
  },
  {
    "name": "claude_usage_reached_positive",
    "text": "rate limit reached, try again in 2 minutes",
    "expected_rule_ids": ["claude_code.usage.reached"],
    "expected_extracted": {"reset_time": "2 minutes"}
  },
  {
    "name": "claude_usage_reached_negative",
    "text": "rate limit reached, please wait",
    "expected_rule_ids": [],
    "negative_for": "claude_code.usage.reached"
  },
  {
    "name": "claude_approval_needed_positive",
    "text": "Do you want to allow this command?",
    "expected_rule_ids": ["claude_code.approval_needed"],
    "expected_extracted": {"action": "allow"}
  },
  {
    "name": "claude_approval_needed_negative",
    "text": "The operation completed successfully",
    "expected_rule_ids": [],
    "negative_for": "claude_code.approval_needed"
  },
  {
    "name": "claude_cost_summary_positive",
    "text": "Session complete. Total cost: $1.25",
    "expected_rule_ids": ["claude_code.session.cost_summary"],
    "expected_extracted": {"cost": "1.25"}
  },
  {
    "name": "claude_cost_summary_negative",
    "text": "Session complete. Total cost: 1.25",
    "expected_rule_ids": [],
    "negative_for": "claude_code.session.cost_summary"
  },
  {
    "name": "claude_api_key_error_positive",
    "text": "Error: invalid api key - please check your ANTHROPIC_API_KEY",
    "expected_rule_ids": ["claude_code.auth.api_key_error"]
  },
  {
    "name": "claude_api_key_error_negative",
    "text": "Error: invalid key - please check your API_TOKEN",
    "expected_rule_ids": [],
    "negative_for": "claude_code.auth.api_key_error"
  },
  {
    "name": "claude_context_warning_positive",
    "text": "Warning: context window 85% context used",
    "expected_rule_ids": ["claude_code.context.warning"],
    "expected_extracted": {"percent": "85"}
  },
  {
    "name": "claude_context_warning_negative",
    "text": "Memory usage at 85%",
    "expected_rule_ids": [],
    "negative_for": "claude_code.context.warning"
  },
  {
    "name": "claude_error_network_positive",
    "text": "Error: connection failed to API server",
    "expected_rule_ids": ["claude_code.error.network"]
  },
  {
    "name": "claude_error_network_negative",
    "text": "Error: failed to parse response",
    "expected_rule_ids": [],
    "negative_for": "claude_code.error.network"
  },
  {
    "name": "claude_error_overloaded_positive",
    "text": "Server overloaded, please retry in 30 seconds",
    "expected_rule_ids": ["claude_code.error.overloaded"],
    "expected_extracted": {"retry_after": "30"}
  },
  {
    "name": "claude_error_overloaded_negative",
    "text": "Server error, please try again later",
    "expected_rule_ids": [],
    "negative_for": "claude_code.error.overloaded"
  },
  {
    "name": "claude_error_timeout_positive",
    "text": "Request timed out after 30 seconds",
    "expected_rule_ids": ["claude_code.error.timeout"],
    "expected_extracted": {"duration": "30"}
  },
  {
    "name": "claude_error_timeout_negative",
    "text": "Request failed with error code 500",
    "expected_rule_ids": [],
    "negative_for": "claude_code.error.timeout"
  },
  {
    "name": "claude_model_selected_positive",
    "text": "Using model: claude-opus-4-20250101",
    "expected_rule_ids": ["claude_code.model.selected"],
    "expected_extracted": {"model": "claude-opus-4-20250101"}
  },
  {
    "name": "claude_model_selected_negative",
    "text": "Using model: gpt-4o",
    "expected_rule_ids": [],
    "negative_for": "claude_code.model.selected"
  },
  {
    "name": "claude_session_end_positive",
    "text": "Session ended. Thank you for using Claude Code.",
    "expected_rule_ids": ["claude_code.session.end"]
  },
  {
    "name": "claude_session_end_negative",
    "text": "Session started. Welcome to Claude Code.",
    "expected_rule_ids": [],
    "negative_for": "claude_code.session.end"
  },
  {
    "name": "claude_thinking_positive",
    "text": "Thinking for 15 seconds on complex problem",
    "expected_rule_ids": ["claude_code.thinking"],
    "expected_extracted": {"duration": "15"}
  },
  {
    "name": "claude_thinking_negative",
    "text": "Processing request...",
    "expected_rule_ids": [],
    "negative_for": "claude_code.thinking"
  },
  {
    "name": "claude_tool_use_positive",
    "text": "Using tool: Bash",
    "expected_rule_ids": ["claude_code.tool_use"],
    "expected_extracted": {"tool_name": "Bash"}
  },
  {
    "name": "claude_tool_use_negative",
    "text": "Running command: npm install",
    "expected_rule_ids": [],
    "negative_for": "claude_code.tool_use"
  },
  {
    "name": "gemini_usage_warning_positive",
    "text": "Usage limit warning: 10% of your Pro models quota remaining.",
    "expected_rule_ids": ["gemini.usage.warning"],
    "expected_extracted": {"remaining": "10"}
  },
  {
    "name": "gemini_usage_warning_negative",
    "text": "Usage limit warning: 10% of your free tier quota remaining.",
    "expected_rule_ids": [],
    "negative_for": "gemini.usage.warning"
  },
  {
    "name": "gemini_usage_reached_positive",
    "text": "Usage limit reached for all Pro models. Please wait before continuing.",
    "expected_rule_ids": ["gemini.usage.reached"]
  },
  {
    "name": "gemini_usage_reached_negative",
    "text": "Usage limit reached for free models. Please wait before continuing.",
    "expected_rule_ids": [],
    "negative_for": "gemini.usage.reached"
  },
  {
    "name": "gemini_session_summary_positive",
    "text": "Interaction Summary: Session ID: abc-def-123 Tool Calls: 12",
    "expected_rule_ids": ["gemini.session.summary"],
    "expected_extracted": {"session_id": "abc-def-123", "tool_calls": "12"}
  },
  {
    "name": "gemini_session_summary_tokens_positive",
    "text": "Session Summary: Session ID: abc-def-123 Tool Calls: 12 Tokens Used: 9,876",
    "expected_rule_ids": ["gemini.session.summary"],
    "expected_extracted": {"session_id": "abc-def-123", "tool_calls": "12", "tokens_used": "9,876"}
  },
  {
    "name": "gemini_session_summary_negative",
    "text": "Interaction Summary: Session ID: abc-def-123",
    "expected_rule_ids": [],
    "negative_for": "gemini.session.summary"
  },
  {
    "name": "gemini_session_resume_hint_positive",
    "text": "To resume this session, run: gemini resume abcdef12-3456-7890-abcd-ef1234567890",
    "expected_rule_ids": ["gemini.session.resume_hint"],
    "expected_extracted": {"session_id": "abcdef12-3456-7890-abcd-ef1234567890"}
  },
  {
    "name": "gemini_session_resume_hint_negative",
    "text": "To resume, run: resume abcdef12-3456-7890-abcd-ef1234567890",
    "expected_rule_ids": [],
    "negative_for": "gemini.session.resume_hint"
  },
  {
    "name": "gemini_model_used_positive",
    "text": "Responding with gemini-1.5-pro",
    "expected_rule_ids": ["gemini.model.used"],
    "expected_extracted": {"model": "gemini-1.5-pro"}
  },
  {
    "name": "gemini_model_used_alt_positive",
    "text": "Using model: gemini-2.0-flash-exp",
    "expected_rule_ids": ["gemini.model.used"],
    "expected_extracted": {"model": "gemini-2.0-flash-exp"}
  },
  {
    "name": "gemini_model_used_negative",
    "text": "Responding with model gemini-1.5-pro",
    "expected_rule_ids": [],
    "negative_for": "gemini.model.used"
  },
  {
    "name": "wezterm_mux_connection_lost_positive",
    "text": "mux server connection lost: disconnected",
    "expected_rule_ids": ["wezterm.mux.connection_lost"]
  },
  {
    "name": "wezterm_mux_connection_lost_negative",
    "text": "mux connection stable and healthy",
    "expected_rule_ids": [],
    "negative_for": "wezterm.mux.connection_lost"
  },
  {
    "name": "wezterm_pane_exited_positive",
    "text": "pane exited with status 1",
    "expected_rule_ids": ["wezterm.pane.exited"],
    "expected_extracted": {"exit_code": "1"}
  },
  {
    "name": "wezterm_pane_exited_negative",
    "text": "pane exited",
    "expected_rule_ids": [],
    "negative_for": "wezterm.pane.exited"
  }
]
